# Вступительная работа в ЛКШ 2025 на параллель P

## Как запустить консольную версию
1. Скопировать файл .env_example в .env
2. Изменить в .env переменную token на нужный токен
3. Установить модули `pip install -r .\requirements.txt`
4. Запустить main.py `python main.py`
5. Если make_requests=True, то запуск может занимать примерно 5 минут

## Как использовать консольную версию
* versus? player_id_1 player_id_2 - количество игр между командами этих игроков
* stats? team_name - количество побед команды, количество поражений и разница между забитыми и пропущенными голами
* /goals? player_id - список голов игрока (id матча и время)
* exit - завершить выполнение программы
* lfr - последний неудачный запрос на сервер lksh и ответ на него 

## Тестирование консольной версии
1. Установить модули `pip install -r .\requirements.txt`
2. Запустить test.py `python test.py`

## Как запустить сервер
1. Скопировать файл .env_example в .env
2. Изменить в .env переменную token на нужный токен
3. Установить модули `pip install -r .\requirements.txt`
4. Запустить server.py `python server.py`
5. Если make_requests=True, то запуск может занимать примерно 5 минут

## Как использовать сервер
* Сервер запускается на порту 5000, изменить порт можно в .env
* /stats?team_name=<team_name> - количество побед команды c именем <team_name>, количество поражений и разница между забитыми и пропущенными голами
* /versus?player1_id=<player1_id>&player2_id=<player2_id> - количество игр между командами игроков с id <player1_id> и <player2_id>
* /goals?player_id=<player_id> - список голов игрока с id <player_id> (id матча и время)
* /lfr - последний неудачный запрос на сервер lksh и ответ на него
* / - главная страница
* /front/stats - HTML-интерфейс для статистики команд
* /front/versus - HTML-интерфейс для сравнения игроков

## Дополнительные параметры в .env
* make_requests - Если False, то не будут отправляться запросы на сервер lksh, будут использоваться сохранённые данные
* save_info - Если True, то будет локально сохранять полученные при запуске данные

## Docker

### Сборка docker-контейнера

Создать docker-контейнер:
```
docker build -t lksh .
```

Запустить docker-контейнер:
```
docker run -d --rm -p 5000:5000 -v $(pwd)/.env:/app/.env lksh
```

### Использование готового docker-контейнера

Загрузить контейнер:
```
docker pull igel2000/lksh
```

Запустить docker-контейнер:
```
docker run -d --rm -p 5000:5000 -v $(pwd)/.env:/app/.env igel2000/lksh
```
